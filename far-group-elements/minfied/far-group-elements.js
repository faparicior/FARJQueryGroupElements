(function(c,d,e){var b={},a={init:function(f){return this.each(function(){b=$.extend(true,$.fn.adminGroupLists.defaults,f);console.log(b);b.$content_el=$(this);b.id_container=$(this).attr("id");$(this).data("settings",$.extend(true,{},b));a.createElements(b.values.far_master_elements,"far_master_elements",1);a.createElements(b.values.far_elements,"far_elements",2);a.createElements(b.values.far_free_elements,"far_free_elements",3);b.ulWatcher=b.$content_el.find("ul");b.masterWatcher=b.ulWatcher.filter(".far_master_elements");b.elementsWatcher=b.ulWatcher.filter(".far_elements");b.freeElementsWatcher=b.ulWatcher.filter(".far_free_elements");b.ulWatcher.on("keypress",".far_display",function(g){if(g.keyCode==13){$(g.target).removeAttr("contenteditable")}return g.which!=13});b.masterWatcher.on("click","li",a.masterSelected);b.elementsWatcher.on("click","li",a.elementsSelected);b.freeElementsWatcher.on("click","li",a.freeElementsSelected);b.masterWatcher.on("click focus","li",a.selectChildCategories);b.ulWatcher.on("click",".far_display-edit",a.editElement);b.ulWatcher.on("focusout",".far_display",a.uneditElement);b.masterWatcher.on("click",".newElementMaster",a.newElementMaster);b.elementsWatcher.on("click",".newElement",a.newElement);b.freeElementsWatcher.on("click",".newElementFree",a.newFreeElement);b.freeElementsWatcher.on("click",".far_display-tag",a.assignElement);b.masterWatcher.on("click",".close-element",a.removeMasterElement);b.elementsWatcher.on("click",".close-element",a.removeElement);b.freeElementsWatcher.on("click",".close-element",a.removeFreeElement)})},masterSelected:function(){var f=$(this);var k=f.closest(".far-admin-groups");var g=f.closest("ul");var j=f.data("uid");var i=k.find(".far_elements").find("li").filter(".newElement");var h=k.find(".far_elements").find("li");g.attr("data-id-selected",j);g.find(".elementSelected").removeClass("elementSelected");h.filter(".elementSelected").removeClass("elementSelected");f.addClass("elementSelected");i.show()},elementsSelected:function(){var f=$(this);f.closest("ul").find(".elementSelected").removeClass("elementSelected");f.addClass("elementSelected")},freeElementsSelected:function(){var f=$(this);f.closest("ul").find(".elementSelected").removeClass("elementSelected");f.addClass("elementSelected")},selectChildCategories:function(){var f=$(this);var j=f.closest(".far-admin-groups");var i=f.closest("ul");var g=j.find(".far_elements").find("li");var h=f.data("uid");i.attr("data-id-selected",h);g.not('[data-relid = "'+h+'"]').not(".newElement").hide();g.filter('[data-relid = "'+h+'"]').show()},editElement:function(){var f=$(this).closest("li").find(".far_display");f.attr("contenteditable","true");f.focusin();a.selectText(f)},uneditElement:function(){$(this).attr("contenteditable","false")},assignElement:function(){var f=$(this).closest("li");var i=f.closest(".far-admin-groups");var h=i.find(".far_master_elements").attr("data-id-selected");if(h){var g=f.detach();g.find(".far_display-tag").remove();g.attr("data-relid",h);i.find(".far_elements").find(".newElement").closest("li").before(g)}},newElementMaster:function(){var l=a.template_li_new_item(1);var h=a.template_edit_element();var k=a.template_close_element();var j=a.generateUUID();var f=$(this).closest("li");var g=$(this).closest("ul");var i=$(this).find(".far_display");f.removeClass("newElementMaster");f.attr("data-uid",j);g.attr("data-id-selected",j);i.after(k);i.after(h);a.selectText(i);f.after(l)},newElement:function(){var i=a.template_li_new_item(2);var h=a.template_edit_element();var g=a.template_close_element();var k=a.generateUUID();var n=$(this).closest("li");var f=n.closest(".far-admin-groups");var l=f.find("ul").filter(".far_master_elements");var m=$(this).find(".far_display");n.removeClass("newElement");$(this).attr("data-uid",k);var j=l.attr("data-id-selected");n.attr("data-relid",j);m.after(g);m.after(h);a.selectText(m);m.closest("li").after(i)},newFreeElement:function(){var l=a.template_li_new_item(3);var h=a.template_edit_element();var k=a.template_close_element();var j=a.generateUUID();var g=a.template_assign_element();var f=$(this).closest("li");var i=$(this).find(".far_display");f.removeClass("newElementFree");$(this).attr("data-uid",j);i.before(g);i.after(k);i.after(h);a.selectText(i);f.after(l)},removeElement:function(){var f=$(this).closest("li");var i=f.closest(".far-admin-groups");var h=f.detach();var g=a.template_assign_element();h.find(".far_display").removeAttr("data-relid");h.find(".far_display").before(g);i.find(".far_free_elements").find(".newElementFree").closest("li").before(h)},removeFreeElement:function(){$(this).closest("li").remove()},removeMasterElement:function(){var i=$(this).closest("li");var m=i.attr("data-uid");var l=i.closest(".far-admin-groups");var f=i.closest("ul");var h=l.find(".far_elements").find("li");var g=h.filter('[data-relid = "'+m+'"]');var k=h.filter(".newElement");var j=l.find(".far_free_elements");g.prepend(a.template_assign_element());g.detach();k.hide();j.find("li").filter(".newElementFree").before(g);i.remove()},template_li_master:function(f){return $('<li data-uid="'+f.id+'"><span class="far_display" " contenteditable="false">'+f.desc+"</span>"+b.template.edit_element+b.template.close_element+"</li>").addClass(b.classes.li_master)},template_li:function(f){return $('<li data-uid="'+f.id+'" data-relid="'+f.relId+'" style="display: none;"><span class="far_display" contenteditable="false">'+f.desc+"</span>"+b.template.edit_element+b.template.close_element+"</li>").addClass(b.classes.li_element)},template_li_free:function(f){return $('<li data-uid="'+f.id+'">'+b.template.assign_element+'<span class="far_display" contenteditable="false">'+f.desc+"</span>"+b.template.edit_element+b.template.close_element+"</li>").addClass(b.classes.li_free_element)},template_edit_element:function(){return $(b.template.edit_element)},template_close_element:function(){return $(b.template.close_element)},template_assign_element:function(){return $(b.template.assign_element)},template_li_new_item:function(f,g){if(f==1){return $('<li class="newElementMaster">'+b.template.new_element+"</li>").addClass(b.classes.li_new_element)}else{if(f==2){if(g){return $('<li class="newElement" style="display: none;">'+b.template.new_element+"</li>").addClass(b.classes.li_new_element)}else{return $('<li class="newElement">'+b.template.new_element+"</li>").addClass(b.classes.li_new_element)}}else{return $('<li class="newElementFree">'+b.template.new_element+"</li>").addClass(b.classes.li_new_element)}}},template_ul:function(f){return $('<ul class="'+f+'"></<ul>')},createElements:function(i,h,g){var f=b.$content_el.find("."+h);if(!f.length){f=a.template_ul(h);f.appendTo("#"+b.id_container)}$.each(i,function(j,k){if(g==1){a.template_li_master(k).appendTo(f)}else{if(g==2){a.template_li(k).appendTo(f)}else{a.template_li_free(k).appendTo(f)}}});if(g==2){a.template_li_new_item(g,true).appendTo(f)}else{a.template_li_new_item(g).appendTo(f)}},getAllElements:function(){var g=$(this).data("settings");var f=$("#"+g.id_container);var h={};h.far_master_elements=a.getElements(f,".far_master_elements",".newElementMaster");h.far_free_elements=a.getElements(f,".far_free_elements",".newElementFree");h.far_elements=a.getElements(f,".far_elements",".newElement");return h},getElements:function(g,k,f){var i=[];var h=g.find(k);var j=h.find("li").not(f);j.each(function(){var l={};l.id=$(this).attr("data-uid");l.desc=$(this).find(".far_display").text();i.push(l)});return i},generateUUID:function(){var g=new Date().getTime();var f="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var h=(g+Math.random()*16)%16|0;g=Math.floor(g/16);return(i=="x"?h:(h&3|8)).toString(16)});return f},selectText:function(i){var j=document;var g=i[0];if(j.body.createTextRange){var f=document.body.createTextRange();f.moveToElementText(g);f.select()}else{if(c.getSelection){var h=c.getSelection();var f=document.createRange();f.selectNodeContents(g);h.removeAllRanges();h.addRange(f)}}}};$.fn.adminGroupLists=function(f){if(a[f]){return a[f].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof f==="object"||!f){return a.init.apply(this,arguments)}else{$.error("Method "+f+" does not exist on jQuery.adminGroupLists")}}};$.fn.adminGroupLists.defaults={version:"1.0",id_container:"demo",template:{new_element:'<span class="far_display" contenteditable="true">Add new</span>',edit_element:'<span class="fa fa-pencil far_display-edit"></span>',close_element:'<span class="fa fa-times far_display-close close-element"></span>',assign_element:'<span class="fa fa-tag far_display-tag"></span>'},classes:{li_master:"",li_element:"",li_free_element:"",li_new_element:""},values:{far_master_elements:[{id:"1",desc:"Alimentacion"},{id:"4",desc:"Servicios profesionales"},{id:"5",desc:"Salud"}],far_free_elements:[{id:"7",desc:"Farmacia"},{id:"8",desc:"Optica"},{id:"9",desc:"Parafarmacia"}],far_elements:[{id:"1",desc:"Ferreteria",relId:"1"},{id:"4",desc:"Supermercado",relId:"1"},{id:"5",desc:"Bar / Restaurante",relId:"4"}]}}})(window,jQuery);